{% block darvin_menu_switcher_widget %}
    {{ form_widget(form) }}
    <script>
        $(function () {
            var $checkbox = $('#{{ id }} input[type="checkbox"][data-default]:first');

            if (!$checkbox.length) {
                return;
            }

            var $parent = $checkbox.closest('form').find('{{ parent_selector }}:first');

            if (!$parent.length) {
                return;
            }

            $checkbox.click(function () {
                $checkbox.data('manual', true);
            });

            var toggleCheckbox;
            (toggleCheckbox = function () {
                if (!$checkbox.data('manual')) {
                    $checkbox[0].checked = '' === $parent.val();
                }
            })();
            $parent.change(toggleCheckbox);
        });
    </script>
{% endblock %}
