parameters:
    darvin_menu.item_factory.abstract.class: Darvin\MenuBundle\Item\AbstractItemFactory

    darvin_menu.item_factory.abstract_entity.class: Darvin\MenuBundle\Item\AbstractEntityItemFactory

    darvin_menu.item_factory.root.class: Darvin\MenuBundle\Item\RootItemFactory

    darvin_menu.item_factory.menu_item_entity.class: Darvin\MenuBundle\Item\MenuItemFactory

    darvin_menu.item_factory.slug_map_item_entity.class:              Darvin\MenuBundle\Item\SlugMapItemFactory
    darvin_menu.item_factory.slug_map_item_entity.generic_uri_route:  darvin_content_show
    darvin_menu.item_factory.slug_map_item_entity.homepage_uri_route: darvin_page_homepage

services:
    _defaults:
        public: true

    darvin_menu.item_factory.abstract:
        class:    '%darvin_menu.item_factory.abstract.class%'
        abstract: true
        public:   false
        calls:
            - [ setGenericItemFactory, [ '@knp_menu.factory' ] ]

    darvin_menu.item_factory.abstract_entity:
        class:    '%darvin_menu.item_factory.abstract_entity.class%'
        parent:   darvin_menu.item_factory.abstract
        public:   false
        abstract: true
        calls:
            - [ setEntityManager, [ '@doctrine.orm.entity_manager' ] ]
            - [ setObjectNamer,   [ '@darvin_utils.object_namer' ] ]
            - [ setSlugMapRouter, [ '@darvin_content.slug.map_router' ] ]

    darvin_menu.item_factory.root:
        class:  '%darvin_menu.item_factory.root.class%'
        parent: darvin_menu.item_factory.abstract
        public: false

    darvin_menu.item_factory.menu_item_entity:
        class:  '%darvin_menu.item_factory.menu_item_entity.class%'
        parent: darvin_menu.item_factory.abstract_entity
        public: false
        arguments:
            - '@request_stack'

    darvin_menu.item_factory.slug_map_item_entity:
        class:  '%darvin_menu.item_factory.slug_map_item_entity.class%'
        parent: darvin_menu.item_factory.abstract_entity
        public: false
